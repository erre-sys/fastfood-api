# App base
spring.application.name=fastfood-api
server.port=${SERVER_PORT:8090}
server.servlet.context-path=/fastfood/api

# Perfil produccion
spring.profiles.active=prod
# Perfil dev
#spring.profiles.active=dev

# JPA / Hibernate
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.show-sql=true


# Logs (Boot creara spring.log en esta carpeta)
logging.application.name=fastfood-api
logging.level.org.hibernate.SQL=INFO
logging.file.path=${LOG_DIR:/opt/palaspapas/data/logs}

# JMS deshabilitado en health para dev
management.health.jms.enabled=false
spring.jms.listener.auto-startup=false

# ===== JMS (ActiveMQ Artemis, Jakarta) =====
#spring.artemis.broker-url=tcp://${ARTEMIS_HOST:localhost}:${ARTEMIS_PORT:61616}
#spring.artemis.user=${ARTEMIS_USER:artemis}
#spring.artemis.password=${ARTEMIS_PASS:artemis}
#spring.jms.template.default-destination=${JMS_DEFAULT_QUEUE:orders.queue}

# ===== Security (Keycloak) =====
# Solo necesitas issuer-uri; jwk-set-uri se resuelve solo desde el issuer.
# El valor real lo ponemos por perfil (dev/prod) mas abajo.

# Roles (coma-separado; se normalizan a ROLE_*)
ejemplo.seguridad.roles.productos.read=ROLE_USER,ROL_ADMIN
ejemplo.seguridad.roles.productos.write=ROLE_USER,ROL_ADMIN

# CORS
app.cors.allowed-origins=http://localhost:4200,http://192.168.40.146:8080,https://app.erre.cloud

# ===== Swagger/OpenAPI Configuration =====
# Rutas de acceso (sin el context-path, Spring lo agrega autom√°ticamente)
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.api-docs.path=/v3/api-docs

# Configuracion de UI
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.tryItOutEnabled=true
springdoc.swagger-ui.filter=true
springdoc.swagger-ui.syntaxHighlight.activated=true

# Ordenar endpoints
springdoc.swagger-ui.disable-swagger-default-url=true
springdoc.swagger-ui.display-request-duration=true

# Configuracion de servidor (importante para context-path)
springdoc.api-docs.enabled=true
springdoc.swagger-ui.enabled=true

# Paquetes a escanear
springdoc.packages-to-scan=ec.com.erre.fastfood.infrastructure.api.in.rest
springdoc.paths-to-match=/**

# Mostrar validaciones de Bean Validation
springdoc.show-actuator=false
springdoc.default-produces-media-type=application/json
springdoc.default-consumes-media-type=application/json

# ===== (Opcional) Soporte a tu JwtConverterProperties existente =====
jwt.auth.converter.resource-id=palaspapas-api
jwt.auth.converter.principal-attribute=preferred_username


# ===== Actuator - Prometheus =====
management.endpoints.web.base-path=/actuator
management.endpoints.web.exposure.include=health,info,prometheus
management.endpoint.health.show-details=never

# Debug autoconfiguration
logging.level.org.springframework.boot.actuate=DEBUG
logging.level.org.springframework.boot.autoconfigure=DEBUG